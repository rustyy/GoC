
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="reset.css" />
		<link rel="stylesheet" type="text/css" href="style.css" />
		<script type="text/javascript" src="jquery-1.7.1.js"></script>
		<script type="text/javascript">
		
		var time = 0;	//initial Time
		var slideTime = 10; //Slide Intervall
		var prev;
		var nowSliding = false;	//boolean, ob grad slide aus/eingefahren wird		
					
		$(document).ready(function(){	//wird erst geladen, wenn Page fertig geladen ist
			prev = $("#sb2"); //hiermit von start ab aktiven slide auswählen
			initSlider();	//fährt nur 'prev'-slide aus, alle anderen werden eingefahren
						
			$(".slidebox").click(function(){
				if((this.clientWidth == 63) && (nowSliding == false)){	//verhindert Doppelclick- und activateMoreThanOne Fehler
					var prevIndex = getPrevIndex();				
					var nextIndex = $(this).attr("id");		//schnappt sich css-id(String) des Objekts	
						nextIndex = nextIndex.charAt(nextIndex.length-1).valueOf(); //wandelt das letzte Zeichen in eine Zahl um
						
					doSlide(prevIndex, nextIndex);					
				}
			});
		});	//end ready			
				
		function doSlide(prevIndex, nextIndex){
			var next = $("#sb" +nextIndex);
						
			$(".t" +nextIndex).fadeToggle(1000);	//nextSlider's Teaser wird langsam ausgefahren
			$(".t" +prevIndex).fadeToggle(1);		//prevSlider's Teaser wird sofort eingefahren
			
			nowSliding = true;	//sperrt anklicken weiterer Slides					
			next.animate({width:"432px"}, 400, function(){nowSliding = false;});	//JS-Callback: Slides am Ende der Animation wieder freigesetzt (
			prev.animate({width:"63px"}, 399);	//400-1 behebt random over width fehler
				
			prev = next;		
			time = 0;		//Reset Timer
		}//end doSlide
						
		function timeCount(){
				if(time == slideTime){	//Intervall (kann oben eingestellt werden)
					var prevIndex = getPrevIndex();			
					var nextIndex = (prevIndex % 4) +1;		//Schleife: nach 4 kommt 1
					
					doSlide(prevIndex, nextIndex);					
				}
				time++; //wenn eine Sekunde vergangen ist
				setTimeout("timeCount()", 1000);	//ruft in 1000ms die Funktion 'timeCount()' auf
				//document.getElementById('txt').value=time;				
		}//end timeCount
		
		function initSlider(){
			var prevIndex = getPrevIndex();	
					
				prev.animate({width:"432px"}, 1); //prev ist hier der aktuelle slide
				for(i = 1; i <= 4; i++){
					if(i != prevIndex){	//alle Teaer bis auf die vom aktiven Slide ausblenden
						$(".t" +i).fadeOut(1);	//so schnell, dass man es nicht sieht
					}
				}
		}//end initSlider
		
		function getPrevIndex(){	
			var prevIndex = prev.attr("id");	//schnappt sich css-id(String) des Objekts
			return prevIndex.charAt(prevIndex.length-1).valueOf();	//wandelt das letzte Zeichen in eine Zahl um
		}//end getPrevIndex
												
		</script>
	</head>
	<body onLoad="timeCount()">
		<div id="wrapper">
				
					<div id="slider">
						<div class="slidebox" id="sb1"> <!--bei id wichtig, dass letztes Zeichen eine Zahl ist und >= 9-->
							<img src="1.jpg"> 
							<h2 class="t1" ><a href="http://www.google.com">Shiina Ringo</a></h2><!--siehe Kommentar sb1-->
							<p class="t1"><a href="http://www.google.com">INTERVIEW: The Guitar-Queen from Japan about life, <br /> love and friendship </a></p>					
						</div>
						<div class="slidebox" id="sb2">
							<img src="2.jpg">
							<h2 class="t2"><a href="http://www.google.com">Japanese Art</a></h2>
							<p class="t2"><a href="http://www.google.com">Yusuke Nakamura und Takeshi Murakami geben sich<br/> die Ehre und erl&auml;utern ihre Sicht der Dinge </a></p>
						</div>
						<div class="slidebox" id="sb3">
							<img src="3.jpg">
							<h2 class="t3"><a href="http://www.google.com">How to let the sun shine</a></h2>
							<p class="t3"><a href="http://www.google.com">Things can be so great if you're open for happiness <br/> How you can get one step further to get it</a></p>
						</div>
						<div class="slidebox" id="sb4">
							<img src="4.jpg">
							<h2 class="t4"><a href="http://www.google.com">Love, Drama, Suspense: New Star</a></h2>
							<p class="t4"><a href="http://www.google.com">What the new movie is all about</a></p>
						</div>	
					</div><!-- slider -->
				
		</div> <!--wrapper-->
	
		<!--<button id="btn1">test</button>
		<input type="text" id="txt">-->
		
	</body>
</html>
